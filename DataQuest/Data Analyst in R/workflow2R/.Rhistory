library(tidyverse)
library(lubridate)
sales <- read_csv('sales2019.csv')
View(sales)
sales <- read_csv("sales2019.csv")
sales <- read_csv("sales2019.csv")
sales <- read_csv("sales2019.csv")
head(sales)
library(tidyverse)
library(tidyverse)
library(lubridate)
sales <- read_csv("sales2019.csv")
head(sales)
sales <- read_csv("sales2019.csv")
head(sales)
setwd("~/Documents/programas/courses/DataQuest/workflow2R")
library(tidyverse)
library(tidyverse)
library(lubridate)
sales <- read_csv("sales2019.csv")
View(sales)
head(sales)
dim(sales)
```{r}
```{r}
dim(sales)
dim(sales)
print(paste(name, typeof(sales[[name]])))
for (name in colnames(sales)){
print(paste(name, typeof(sales[[name]])))
}
for (name in colnames(sales)){
print(paste(name, "is of the type", typeof(sales[[name]])))
}
is_null(sales$date)
sum(is_null, sales$date)
sum(is_na, sales$date)
sum(is.na, sales$date)
is.na(sales$date)
sum(is.na(sales$date))
sum(is.na(sales$user_submitted_review))
```{r}
sum(is.na(sales$user_submitted_review))
sum(is.na(sales[[name]]))
for (name in colnames(sales)){
sum(is.na(sales[[name]]))
}
print(sum(is.na(sales[[name]])))
for (name in colnames(sales)){
print(sum(is.na(sales[[name]])))
}
print(paste(sum(is.na(sales[[name]]))))
for (name in colnames(sales)){
print(paste(sum(is.na(sales[[name]]))))
}
print(paste(names, 'is missing' ,sum(is.na(sales[[name]]))))
for (name in colnames(sales)){
print(paste(names, 'is missing' ,sum(is.na(sales[[name]]))))
}
print(paste(names, 'is missing',sum(is.na(sales[[name]]))))
print(paste(names,sum(is.na(sales[[name]]))))
print(paste(names,sum(is.na(sales[[name]]))))
for (name in colnames(sales)){
print(paste(name, 'is missing' ,sum(is.na(sales[[name]]))))
}
sales_review <- filter(sales, !is.na())
sales_review <- filter(sales, !is.na
sales_review <- filter(sales, !is.na)
sales_review <- filter(sales, !is.na)
sales_review <- filter(sales, !is.na(sales$user_submitted_review))
sales_review <- filter(sales, !is.na(sales$user_submitted_review))
head(sales_review)
avg_purchase <- mean(sales_review$total_purchased)
avg_purchase
avg_purchase <- mean(sales_review$total_purchased)
avg_purchase
avg_purchase <- mean(sales_review$total_purchased)
avg_purchase <- mean(sales_review$total_purchased)
avg_purchase <- mean(sales_review[[total_purchased]])
avg_purchase <- mean(sales_review[[total_purchased]])
avg_purchase <- mean(sales_review$total_purchased)
avg_purchase
avg_purchase <- mean(sales_review$total_purchased, na.rm = TRUE)
avg_purchase
avg_purchase <- mean(sales_review$total_purchased, na.rm = F)
avg_purchase
avg_purchase <- mean(sales_review$total_purchased, na.rm = T)
avg_purchase
mutate(total_purchased = if_else(is.na(total_purchased), avg_purchase,total_purchased)
head(sales_review_filled)
sales_review_filled <- sales_review %>%
mutate(total_purchased = if_else(is.na(total_purchased), avg_purchase,total_purchased))
head(sales_review_filled)
round(4.5)
avg_purchase <- round(mean(sales_review$total_purchased, na.rm = T))
avg_purchase
sales_review_filled <- sales_review %>%
mutate(total_purchased = if_else(is.na(total_purchased), avg_purchase,total_purchased))
sales_review_filled <- sales_review %>%
mutate(total_purchased = if_else(is.na(total_purchased), avg_purchase,total_purchased))
head(sales_review_filled)
unique(sales_review_filled$user_submitted_review)
evaluations <- unique(sales_review_filled$user_submitted_review)
unique(sales_review_filled$user_submitted_review)
sales_review_filled <- sales_review_filled %>% mutate(
is_positive = case_when(
str_detect(user_submitted_review, 'OK') ~ T,
str_detect(user_submitted_review, 'okay') ~ T,
str_detect(user_submitted_review, 'Hated') ~ F,
str_detect(user_submitted_review, 'learned') ~ T,
str_detect(user_submitted_review, 'Awesome') ~ T,
str_detect(user_submitted_review, 'Never') ~ T,
str_detect(user_submitted_review, 'not recommend') ~ T
)
)
sales_review_filled <- sales_review_filled %>% mutate(
is_positive = case_when(
str_detect(user_submitted_review, 'OK') ~ T,
str_detect(user_submitted_review, 'okay') ~ T,
str_detect(user_submitted_review, 'Hated') ~ F,
str_detect(user_submitted_review, 'learned') ~ T,
str_detect(user_submitted_review, 'Awesome') ~ T,
str_detect(user_submitted_review, 'Never') ~ T,
str_detect(user_submitted_review, 'not recommend') ~ T
)
)
head(sales_review_filled)
head(sales_review_filled[["user_submitted_review", "is_positive"]])
head(sales_review_filled["user_submitted_review", "is_positive"])
head(sales_review_filled %>% select("user_submitted_review", "is_positive")
head(sales_review_filled %>% select("user_submitted_review", "is_positive")
sales_review_filled %>% select("user_submitted_review", "is_positive")
sales_review_filled <- sales_review_filled %>% mutate(
is_positive = case_when(
str_detect(user_submitted_review, 'OK') ~ T,
str_detect(user_submitted_review, 'okay') ~ T,
str_detect(user_submitted_review, 'Hated') ~ F,
str_detect(user_submitted_review, 'learned') ~ T,
str_detect(user_submitted_review, 'Awesome') ~ T,
str_detect(user_submitted_review, 'Never') ~ T,
str_detect(user_submitted_review, 'not recommend') ~ T,
TRUE ~ FALSE
)
)
sales_review_filled %>% select("user_submitted_review", "is_positive")
sales_review_filled %>% select("user_submitted_review", "is_positive") %>% unique()
sales_review_filled <- sales_review_filled %>% mutate(
is_positive = case_when(
str_detect(user_submitted_review, 'OK') ~ T,
str_detect(user_submitted_review, 'okay') ~ T,
str_detect(user_submitted_review, 'Hated') ~ F,
str_detect(user_submitted_review, 'learned') ~ T,
str_detect(user_submitted_review, 'Awesome') ~ T,
str_detect(user_submitted_review, 'Never') ~ T,
str_detect(user_submitted_review, 'not recommend') ~ F,
TRUE ~ FALSE
)
)
sales_review_filled %>% select("user_submitted_review", "is_positive") %>% unique()
sales_review_filled <- sales_review_filled %>% mutate(
date = mdy(date)
)
head(sales_review_filled)
sales_review_filled <- sales_review_filled %>%
mutate(
date = mdy(date)
)
head(sales_review_filled)
sales <- read_csv("sales2019.csv")
head(sales)
sales_review_filled <- sales_review %>%
mutate(total_purchased = if_else(is.na(total_purchased), avg_purchase,total_purchased))
head(sales_review_filled)
unique(sales_review_filled$user_submitted_review)
sales_review_filled <- sales_review_filled %>% mutate(
is_positive = case_when(
str_detect(user_submitted_review, 'OK') ~ T,
str_detect(user_submitted_review, 'okay') ~ T,
str_detect(user_submitted_review, 'Hated') ~ F,
str_detect(user_submitted_review, 'learned') ~ T,
str_detect(user_submitted_review, 'Awesome') ~ T,
str_detect(user_submitted_review, 'Never') ~ T,
str_detect(user_submitted_review, 'not recommend') ~ F,
TRUE ~ FALSE
)
)
sales_review_filled %>% select("user_submitted_review", "is_positive") %>% unique()
sales_review_filled_dated <- sales_review_filled %>%
mutate(
date = mdy(date)
)
head(sales_review_filled_dated)
sales_review_filled_dated <- sales_review_filled %>%
mutate(
date = mdy(date),
before_first_july = date < ymd('2019-7-1')
)
head(sales_review_filled_dated)
sales_review_filled_dated %>% select('date', 'before_first_july')
sales_review_filled_dated %>% group_by(before_first_july) %>% summarise(n = n())
sales_review_filled_dated %>%
group_by(before_first_july) %>%
summarise( total_purchased= n())
sales_review_filled_dated %>%
group_by(before_first_july) %>%
summarise( total_reviewed= n(), positive_review = sum(is_positive))
sales_review_filled_dated %>%
group_by(before_first_july) %>%
summarise( total_reviewed= n(), positive_review = sum(is_positive)/n())
sales_review_filled_dated %>%
group_by(before_first_july) %>%
summarise( total_reviewed= n(), positive_review = sum(is_positive)/n(),
total_purchased = sum(total_purchased))
sales_review_filled_dated %>%
group_by(before_first_july, customer_type) %>%
summarise( total_reviewed= n(), positive_review = sum(is_positive)/n(),
total_purchased = sum(total_purchased))
